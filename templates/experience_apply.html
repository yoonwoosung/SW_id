{% extends "layout.html" %}
{% block content %}
<div class="container">
    <h2>{{ item.crop }} ì²´í—˜ ì‹ ì²­</h2>
    <p><strong>ğŸ“ ì¥ì†Œ:</strong> {{ item.location }}</p>
    <hr>
    
    {% if error_message %}
        <div class="alert alert-danger">
            {{ error_message }}
        </div>
    {% endif %}

    <form method="POST" id="apply-form" action="{{ url_for('experience_apply', item_id=item.id) }}" class="apply-form">
        <div class="form-group">
            <label for="name">ì‹ ì²­ì ì´ë¦„</label>
            <input type="text" id="name" name="applicant_name" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="phone">ì—°ë½ì²˜</label>
            <input type="tel" id="phone" name="phone_number" class="form-control"
                   placeholder="010-1234-5678" required>
        </div>
        <div class="form-group">
            <label for="participants">ì°¸ì—¬ ì¸ì›</label>
            <input type="number" id="participants" name="participants_count" class="form-control" min="1" value="1" required>
        </div>
        
        <button type="submit" class="btn-submit btn-large">ì‹ ì²­ ì™„ë£Œí•˜ê¸°</button>
    </form>
</div>

<script>
    // í¼(form)ì´ ì œì¶œ(submit)ë  ë•Œ ì´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰
    document.getElementById('apply-form').addEventListener('submit', function(event) {
        const phoneInput = document.getElementById('phone');
        const phoneValue = phoneInput.value;
        
        // ì „í™”ë²ˆí˜¸ ì–‘ì‹ì„ ê²€ì‚¬í•  ì •ê·œì‹ (010-ìˆ«ì4ê°œ-ìˆ«ì4ê°œ)
        const phonePattern = /^010-\d{4}-\d{4}$/;

        // ë§Œì•½ ì „í™”ë²ˆí˜¸ê°€ ì–‘ì‹ì— ë§ì§€ ì•Šìœ¼ë©´
        if (!phonePattern.test(phoneValue)) {
            // íŒì—…ì°½ì„ ë„ì›€
            alert('ì „í™”ë²ˆí˜¸ë¥¼ 010-1234-5678 í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            
            // í¼ ì œì¶œì„ ë§‰ìŒ
            event.preventDefault();
        }
    });
</script>
{% endblock %}