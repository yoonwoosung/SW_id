{% extends "layout.html" %}
{% from 'shared/macros.html' import guide_popup_modal %}

{% block content %}

<div class="container">
    <div class="dashboard-header">
        <h2>ë‚˜ì˜ ë†ì¥ ëª©ë¡ ğŸ§‘â€ğŸŒ¾</h2>
        <div class="btn-group">
            <button type="button" class="btn btn-info" id="farmer-guide-popup-btn">ì´ìš©ê°€ì´ë“œ</button>
            <button type="button" class="btn btn-primary" id="farmer-how-to-use-btn">ì´ìš©ë°©ë²•</button>
            <a href="{{ url_for('farmer_register') }}" class="btn btn-success">ìƒˆ ì²´í—˜ ë“±ë¡í•˜ê¸° +</a>
        </div>
    </div>

    {% if listings %}
    <div class="item-list">
        <div class="list-header">
            <span>ì‘ë¬¼ëª…</span><span>ìœ„ì¹˜</span><span>ê°€ê²©</span><span>ëª¨ì§‘í˜„í™©</span>
        </div>
        {% for item in listings %}
        <a href="{{ url_for('detail_experience', item_id=item.id) }}" class="list-item">
            <span><strong>{{ item.crop }}</strong><br>#{{ "ì¹œí™˜ê²½" if item.pesticide_free else "ì¼ë°˜" }}</span>
            <span>{{ item.location }}</span>
            <span>{{ "{:,}".format(item.cost) }}ì›</span>
            <span class="d-day {% if item.d_day < 5 %}imminent{% endif %}">
                D-{{ item.d_day }}<br>
                <span>ëª¨ì§‘ì¤‘</span>
            </span>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-items">
        <p>ì•„ì§ ë“±ë¡ëœ ë†ì¥ ì²´í—˜ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        <p>'ìƒˆ ì²´í—˜ ë“±ë¡í•˜ê¸°' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì²« ì²´í—˜ì„ ë“±ë¡í•´ë³´ì„¸ìš”!</p>
    </div>
    {% endif %}
</div>

{{ guide_popup_modal(modal_id='farmer-guide-popup-modal', close_btn_id='farmer-guide-popup-close', image_filename='ì´ìš©ê°€ì´ë“œ ì´ë¯¸ì§€.png') }}
{{ guide_popup_modal(modal_id='farmer-how-to-use-modal', close_btn_id='farmer-how-to-use-close', image_filename='ì´ìš©ê°€ì´ë“œ ì´ë¯¸ì§€.png', alt_text='ì´ìš©ë°©ë²•') }}

{% endblock %}